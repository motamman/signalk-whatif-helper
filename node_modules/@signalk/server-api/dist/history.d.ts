import { Context, Path, Timestamp } from '.';
import { Temporal } from '@js-temporal/polyfill';
export type AggregateMethod = 'average' | 'min' | 'max' | 'first' | 'last' | 'mid' | 'middle_index';
export type ValueList = {
    path: Path;
    method: AggregateMethod;
}[];
export type DataRow = [Timestamp, ...any[]];
export interface ValuesResponse {
    context: Context;
    range: {
        from: Timestamp;
        to: Timestamp;
    };
    values: ValueList;
    data: DataRow[];
}
export type TimeRangeQueryParams = {
    duration: number | string;
    from?: never;
    to?: never;
} | {
    duration: number | string;
    from: string;
    to?: never;
} | {
    duration: number | string;
    from?: never;
    to: string;
} | {
    duration?: never;
    from: string;
    to?: never;
} | {
    duration: never;
    from: string;
    to: string;
};
export type ValuesRequestQueryParams = TimeRangeQueryParams & {
    context?: string;
    resolution?: number;
};
export type PathsRequestQueryParams = TimeRangeQueryParams;
export type PathsResponse = Path[];
export type ContextsRequestQueryParams = TimeRangeQueryParams;
export type ContextsResponse = Context[];
export type HistoryApiRegistry = {
    registerHistoryApiProvider(provider: HistoryApi): void;
    unregisterHistoryApiProvider(): void;
};
/** @category  History API */
export type WithHistoryApi = {
    /**
     * Returns a promise for the active History API implementation, or rejects if unavailable.
     * The property is optional to support explicitly older servers that do not have a history api provider.
     *
     * @returns Promise that resolves to a {@link HistoryApi} instance if available, or rejects with an error if not.
     */
    getHistoryApi?: () => Promise<HistoryApi>;
};
/** @category  History API */
export interface HistoryApi {
    /**
     * Retrieves historical values for the specified query parameters.
     *
     * @param query - The {@link ValuesRequest} containing context, time range, resolution, and path specifications.
     * @returns A promise that resolves to a {@link ValuesResponse} containing the requested historical data.
     */
    getValues(query: ValuesRequest): Promise<ValuesResponse>;
    /**
     * Lists available contexts for which historical data can be queried.
     *
     * @param query - The {@link ContextsRequest} specifying time range and filters.
     * @returns A promise that resolves to a {@link ContextsResponse} array of available contexts.
     */
    getContexts(query: ContextsRequest): Promise<ContextsResponse>;
    /**
     * Lists available paths for historical data queries.
     *
     * @param query - The {@link PathsRequest} specifying time range and filters.
     * @returns A promise that resolves to a {@link PathsResponse} array of available paths.
     */
    getPaths(query: PathsRequest): Promise<PathsResponse>;
}
export declare function isHistoryApi(obj: unknown): obj is HistoryApi;
/**
 * Represents a time duration, either as a {@link Temporal.Duration} object or a number (milliseconds).
 *
 * @example
 * // Using Temporal.Duration
 * const duration: Duration = Temporal.Duration.from({ minutes: 5 });
 *
 * // Using milliseconds
 * const duration: Duration = 300000; // 5 minutes in milliseconds
 */
export type Duration = Temporal.Duration | number;
export type TimeRangeParams = {
    duration: Temporal.Duration;
    from?: never;
    to?: never;
} | {
    duration: Duration;
    from: Temporal.Instant;
    to?: never;
} | {
    duration: Duration;
    from?: never;
    to: Temporal.Instant;
} | {
    duration?: never;
    from: Temporal.Instant;
    to?: never;
} | {
    duration: never;
    from: Temporal.Instant;
    to: Temporal.Instant;
};
export interface PathSpec {
    path: Path;
    aggregate: AggregateMethod;
}
export type ValuesRequest = TimeRangeParams & {
    context?: Context;
    resolution?: number;
    pathSpecs: PathSpec[];
};
export type PathsRequest = TimeRangeParams;
export type ContextsRequest = TimeRangeParams;
//# sourceMappingURL=history.d.ts.map